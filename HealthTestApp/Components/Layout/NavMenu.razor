@implements IDisposable

@inject NavigationManager NavigationManager



<input type="checkbox" title="Navigation menu" class="navbar-toggler" />
<div class="logo-container">
    <a href="/">
        <svg width="205" height="128" viewBox="0 0 305 128" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M70.8245 41.664H86.3765C86.6965 41.664 86.8245 41.92 86.8885 42.112C86.8885 42.432 86.6325 42.56 86.3765 42.624C83.8805 42.944 83.0485 44.608 83.0485 48.32V73.344C83.0485 77.056 83.8805 78.72 86.3765 79.04C86.6325 79.104 86.8885 79.232 86.8885 79.552C86.8245 79.744 86.6965 80 86.3765 80H70.8245C70.5045 80 70.3125 79.872 70.3125 79.552C70.3125 79.232 70.4405 79.104 70.8245 79.04C73.5125 78.72 74.0885 77.12 74.0885 73.344V48.32C74.0885 44.544 73.5125 42.944 70.8245 42.624C70.4405 42.56 70.3125 42.432 70.3125 42.112C70.3125 41.792 70.5045 41.664 70.8245 41.664ZM91.9485 55.232H112.173C112.557 55.232 112.813 55.68 112.621 56L99.2445 79.104H107.565C110.253 79.104 111.021 77.056 111.853 74.304C111.853 74.112 112.045 73.92 112.301 73.92C112.557 73.856 112.813 74.112 112.749 74.432L112.237 80.064H89.2605V80C88.8765 80 88.6845 79.616 88.8765 79.296L102.189 56.192H96.9405C93.8685 56.192 92.8445 58.624 92.3325 60.992C92.3325 61.248 92.0765 61.504 91.8205 61.44C91.5645 61.44 91.3725 61.184 91.3725 60.928L91.9485 55.232ZM125.505 55.232C128.833 55.232 132.545 56.512 134.657 59.2C136.897 62.016 136.641 66.88 131.393 67.52C128.321 67.84 125.185 68.224 122.113 68.608C123.905 77.056 133.313 78.272 136.449 72.768C136.641 72.448 136.897 71.744 137.409 72C137.601 72.064 137.665 72.32 137.601 72.512C136.065 78.4 131.201 80.448 125.633 80.448C120.257 80.448 114.881 77.248 113.217 71.616C112.961 70.784 112.833 70.016 112.705 69.12C112.065 61.76 115.585 55.232 125.505 55.232ZM125.441 56.192C121.921 56.192 120.769 63.36 121.921 67.648C126.145 67.136 129.601 65.664 129.153 61.568C128.833 58.304 128.065 56.192 125.441 56.192ZM149.851 55.168C149.915 55.168 149.979 55.232 150.043 55.232C150.171 55.296 150.299 55.488 150.299 55.68V58.112C151.643 56.384 153.819 55.296 156.635 55.296C164.251 55.296 166.619 59.84 167.323 64.256L168.411 73.344C168.859 77.056 169.947 78.656 172.379 79.04C172.699 79.104 172.955 79.232 173.019 79.552C173.019 79.808 172.826 80 172.443 80H157.019C156.699 80 156.443 79.936 156.443 79.552C156.443 79.232 156.699 79.104 156.955 79.04C159.515 78.656 159.899 77.056 159.515 73.344L158.427 63.36C158.043 60.224 156.827 56.576 153.627 57.024C150.683 57.472 150.299 60.544 150.299 66.112V73.344C150.299 77.056 151.131 78.72 153.627 79.04C153.883 79.104 154.139 79.232 154.139 79.552C154.075 79.744 153.947 80 153.627 80H138.075C137.755 80 137.562 79.872 137.562 79.552C137.562 79.232 137.691 79.104 138.075 79.04C140.763 78.72 141.339 77.12 141.339 73.344V67.136C141.339 63.296 141.019 61.312 138.267 60.544C137.947 60.48 137.691 60.416 137.691 60.032C137.691 59.776 137.883 59.584 138.203 59.584C144.411 59.392 149.019 55.68 149.467 55.296C149.595 55.232 149.723 55.168 149.851 55.168ZM181.512 46.656C181.576 46.464 181.768 46.272 182.024 46.272C182.216 46.336 182.344 46.528 182.344 46.784V56.64H186.824C187.08 56.576 187.272 56.832 187.272 57.088C187.272 57.344 187.08 57.6 186.824 57.6H182.344V71.488C182.344 75.072 183.304 76.416 184.456 76.416C185.544 76.352 186.632 75.136 187.08 74.048C187.144 73.92 187.336 73.792 187.528 73.792C187.912 73.792 188.104 74.176 187.976 74.496C186.568 77.504 183.752 80.448 180.104 80.448C175.752 80.448 173.448 78.08 173.448 71.488V61.632C173.448 57.472 173.384 57.472 170.312 57.472C170.056 57.408 169.8 57.344 169.8 57.024C169.8 56.704 169.992 56.576 170.312 56.512C173.576 55.808 180.168 50.88 181.512 46.656ZM194.863 41.6C197.295 41.6 200.111 43.584 200.111 46.848C200.111 49.728 197.743 52.032 194.863 52.032C192.687 52.032 189.679 50.112 189.679 46.848C189.679 43.968 192.047 41.6 194.863 41.6ZM199.279 55.36C199.599 55.104 200.111 55.296 200.111 55.744V73.344C200.111 77.056 200.943 78.72 203.439 79.04C203.695 79.104 203.951 79.232 203.951 79.552C203.887 79.744 203.759 80 203.439 80H187.887C187.567 80 187.375 79.872 187.375 79.552C187.375 79.232 187.503 79.104 187.887 79.04C190.575 78.72 191.151 77.12 191.151 73.344V67.136C191.151 63.168 190.383 61.056 188.079 60.608C187.759 60.608 187.503 60.544 187.503 60.16C187.503 59.84 187.695 59.648 188.015 59.648C194.223 59.456 198.831 55.808 199.279 55.36ZM214.835 55.232C222.067 54.912 226.867 57.408 227.955 64.256L228.915 72.576C229.555 76.672 230.899 77.824 231.923 78.016C232.243 78.08 232.627 77.952 232.947 77.952C233.459 78.016 233.587 78.656 233.203 78.848C231.411 79.936 229.811 80.448 227.123 80.448C224.563 80.448 221.939 79.68 220.723 77.248C220.723 77.312 218.163 80.448 212.659 80.448C208.307 80.448 203.955 78.784 203.955 74.048C203.955 65.92 213.107 67.712 217.011 65.92C218.675 65.152 218.995 64.128 218.739 62.272C218.483 60.096 217.331 56.192 214.067 56.192C212.083 56.192 211.315 57.408 211.315 58.496C211.315 60.416 214.195 60.416 213.747 63.104C213.171 66.304 207.411 66.816 206.387 62.976C205.427 59.264 208.179 55.616 214.835 55.232ZM219.123 65.472C218.675 66.112 218.099 66.56 217.459 66.944C215.411 68.16 212.339 69.376 212.339 73.152C212.339 79.552 220.723 79.424 220.147 75.008L219.123 65.472Z" fill="white" />
        </svg>
    </a>

</div>
<div class="nav-scrollable" onclick="document.querySelector('.navbar-toggler').click()">
    <nav class="flex-column">
        <AuthorizeView>
            <Authorized>
                <div class="nav-item px-3">
                    <NavLink class="nav-link" href="" Match="NavLinkMatch.All">
                        <span class="bi bi-house-door-fill-nav-menu" aria-hidden="true"></span> Home
                    </NavLink>
                </div>
                <div class="nav-item px-3">
                    <NavLink class="nav-link" href="Account/Manage">
                        <span class="bi bi-person-fill-nav-menu" aria-hidden="true"></span> @context.User.Identity?.Name
                    </NavLink>
                </div>
                <div class="nav-item px-3">
                    <form action="Account/Logout" method="post">
                        <AntiforgeryToken />
                        <input type="hidden" name="ReturnUrl" value="@currentUrl" />
                        <button type="submit" class="nav-link">
                            <span class="bi bi-arrow-bar-left-nav-menu" aria-hidden="true"></span> Logout
                        </button>
                    </form>
                </div>
            </Authorized>
            <NotAuthorized>
                <div class="nav-item px-3">
                    <NavLink class="nav-link" href="Account/Register">
                        <span class="bi bi-person-nav-menu" aria-hidden="true"></span> Register
                    </NavLink>
                </div>
                <div class="nav-item px-3">
                    <NavLink class="nav-link" href="Account/Login">
                        <span class="bi bi-person-badge-nav-menu" aria-hidden="true"></span> Login
                    </NavLink>
                </div>
            </NotAuthorized>
        </AuthorizeView>
    </nav>
</div>


@code {
    private string? currentUrl;

    protected override void OnInitialized()
    {
        currentUrl = NavigationManager.ToBaseRelativePath(NavigationManager.Uri);
        NavigationManager.LocationChanged += OnLocationChanged;
    }

    private void OnLocationChanged(object? sender, LocationChangedEventArgs e)
    {
        currentUrl = NavigationManager.ToBaseRelativePath(e.Location);
        StateHasChanged();
    }

    public void Dispose()
    {
        NavigationManager.LocationChanged -= OnLocationChanged;
    }
}

